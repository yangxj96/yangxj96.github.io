import{v as $}from"../vkbeautify/vkbeautify.3VfZWRQB.js";import{H as j}from"../highlight.js/highlight.js.dIvVJK4H.js";import{i as m,_ as U}from"../../assets/index-zr023Hs_.js";import{u as I}from"../UseTable/UseTable.SqMQ832M.js";import{A as X}from"../AccountApi/AccountApi.swbyamOW.js";import{d as H,b as h,i as K,ah as n,o as w,c as F,T as e,O as t,S as l,R as B,M as E,u as r,a as f,V as O}from"../@vue/@vue.I-RMNdSZ.js";import"../dayjs/dayjs.nXyUZ0Ym.js";import"../pinia/pinia.RTuYtbS_.js";import"../vue-demi/vue-demi.C4xddsk9.js";import"../element-plus/element-plus.qvdORcwZ.js";import"../lodash-es/lodash-es.L7yb-_UW.js";import"../@element-plus/@element-plus.jJRl1ily.js";import"../@popperjs/@popperjs.-N-3kK7X.js";import"../@ctrl/@ctrl.ZggoHSuR.js";import"../async-validator/async-validator.BHjhHa7C.js";import"../memoize-one/memoize-one.JaOscZgY.js";import"../normalize-wheel-es/normalize-wheel-es.1urBKM79.js";import"../@floating-ui/@floating-ui.27iaWG4d.js";import"../axios/axios.QLjAsgXu.js";import"../vue-router/vue-router.K23cJQPm.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.YzE7ESjF.js";import"//at.alicdn.com/t/c/font_3119163_oqg12xgkssd.js";const J={style:{height:"94%"}},Q={style:{height:"60vh"}},W={style:{height:"100%"}},Y={class:"dialog-footer"},Z=H({__name:"index",setup(ee){const M={mounted:a=>{a.querySelectorAll("pre code").forEach(_=>{j.highlightElement(_)})}},c=h({key:"",value:void 0}),v=h([]),s=h({preview:!1,active:"xml",picture:"/src/assets/images/flow-img.png",xml:`<?xml version="1.0" encoding="UTF-8"?><definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:flowable="http://flowable.org/bpmn" xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.flowable.org/processdef">  <process id="LeaveApplication" name="请假申请" flowable:processCategory="oa">    <startEvent id="startNode1" name="开始">      <outgoing>Flow_1i6ntl4</outgoing>    </startEvent>    <sequenceFlow id="Flow_1i6ntl4" sourceRef="startNode1" targetRef="Activity_02v0kq2" />    <userTask id="Activity_02v0kq2" name="一级审批" flowable:formKey="Approve:Level1" flowable:assignee="\${approverId}">      <incoming>Flow_1i6ntl4</incoming>      <incoming>Flow_1n4cqa6</incoming>      <outgoing>Flow_101x41f</outgoing>    </userTask>    <exclusiveGateway id="Gateway_1mdfbn1">      <incoming>Flow_101x41f</incoming>      <outgoing>Flow_1oexhjd</outgoing>      <outgoing>Flow_0ms36c0</outgoing>    </exclusiveGateway>    <sequenceFlow id="Flow_101x41f" sourceRef="Activity_02v0kq2" targetRef="Gateway_1mdfbn1" />    <sequenceFlow id="Flow_1oexhjd" sourceRef="Gateway_1mdfbn1" targetRef="Activity_0pbabwd">      <conditionExpression xsi:type="tFormalExpression">\${status == 'approve'}</conditionExpression>    </sequenceFlow>    <userTask id="Activity_0pbabwd" name="二级审批" flowable:formKey="Approve:Level2" flowable:candidateUsers="zhangsan,lisi">      <incoming>Flow_1oexhjd</incoming>      <outgoing>Flow_0oidzit</outgoing>    </userTask>    <exclusiveGateway id="Gateway_01lgsw5">      <incoming>Flow_0oidzit</incoming>      <outgoing>Flow_1mqv4d2</outgoing>      <outgoing>Flow_0ubisbp</outgoing>    </exclusiveGateway>    <sequenceFlow id="Flow_0oidzit" sourceRef="Activity_0pbabwd" targetRef="Gateway_01lgsw5" />    <endEvent id="Event_1mqklz0" name="结束">      <incoming>Flow_1mqv4d2</incoming>    </endEvent>    <sequenceFlow id="Flow_1mqv4d2" sourceRef="Gateway_01lgsw5" targetRef="Event_1mqklz0">      <conditionExpression xsi:type="tFormalExpression">\${status == 'approve'}</conditionExpression>    </sequenceFlow>    <userTask id="Activity_15gykiz" name="修改填报">      <incoming>Flow_0ms36c0</incoming>      <incoming>Flow_0ubisbp</incoming>      <outgoing>Flow_1n4cqa6</outgoing>    </userTask>    <sequenceFlow id="Flow_0ms36c0" sourceRef="Gateway_1mdfbn1" targetRef="Activity_15gykiz">      <conditionExpression xsi:type="tFormalExpression">\${status == 'reject'}</conditionExpression>    </sequenceFlow>    <sequenceFlow id="Flow_0ubisbp" sourceRef="Gateway_01lgsw5" targetRef="Activity_15gykiz">      <conditionExpression xsi:type="tFormalExpression">\${status == 'reject'}</conditionExpression>    </sequenceFlow>    <sequenceFlow id="Flow_1n4cqa6" sourceRef="Activity_15gykiz" targetRef="Activity_02v0kq2" />  </process>  <bpmndi:BPMNDiagram id="BPMNDiagram_flow">    <bpmndi:BPMNPlane id="BPMNPlane_flow" bpmnElement="LeaveApplication">      <bpmndi:BPMNEdge id="Flow_1n4cqa6_di" bpmnElement="Flow_1n4cqa6">        <di:waypoint x="490" y="440" />        <di:waypoint x="370" y="440" />        <di:waypoint x="370" y="255" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_0ubisbp_di" bpmnElement="Flow_0ubisbp">        <di:waypoint x="880" y="240" />        <di:waypoint x="880" y="440" />        <di:waypoint x="590" y="440" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_0ms36c0_di" bpmnElement="Flow_0ms36c0">        <di:waypoint x="540" y="240" />        <di:waypoint x="540" y="400" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_1mqv4d2_di" bpmnElement="Flow_1mqv4d2">        <di:waypoint x="905" y="215" />        <di:waypoint x="1002" y="215" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_0oidzit_di" bpmnElement="Flow_0oidzit">        <di:waypoint x="760" y="215" />        <di:waypoint x="855" y="215" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_1oexhjd_di" bpmnElement="Flow_1oexhjd">        <di:waypoint x="565" y="215" />        <di:waypoint x="660" y="215" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_101x41f_di" bpmnElement="Flow_101x41f">        <di:waypoint x="420" y="215" />        <di:waypoint x="515" y="215" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNEdge id="Flow_1i6ntl4_di" bpmnElement="Flow_1i6ntl4">        <di:waypoint x="225" y="215" />        <di:waypoint x="320" y="215" />      </bpmndi:BPMNEdge>      <bpmndi:BPMNShape id="BPMNShape_startNode1" bpmnElement="startNode1" bioc:stroke="">        <omgdc:Bounds x="195" y="200" width="30" height="30" />        <bpmndi:BPMNLabel>          <omgdc:Bounds x="197" y="237" width="23" height="14" />        </bpmndi:BPMNLabel>      </bpmndi:BPMNShape>      <bpmndi:BPMNShape id="Activity_0wi8psg_di" bpmnElement="Activity_02v0kq2">        <omgdc:Bounds x="320" y="175" width="100" height="80" />      </bpmndi:BPMNShape>      <bpmndi:BPMNShape id="Gateway_1mdfbn1_di" bpmnElement="Gateway_1mdfbn1" isMarkerVisible="true">        <omgdc:Bounds x="515" y="190" width="50" height="50" />      </bpmndi:BPMNShape>      <bpmndi:BPMNShape id="Activity_17nhy2b_di" bpmnElement="Activity_0pbabwd">        <omgdc:Bounds x="660" y="175" width="100" height="80" />      </bpmndi:BPMNShape>      <bpmndi:BPMNShape id="Gateway_01lgsw5_di" bpmnElement="Gateway_01lgsw5" isMarkerVisible="true">        <omgdc:Bounds x="855" y="190" width="50" height="50" />      </bpmndi:BPMNShape>      <bpmndi:BPMNShape id="Event_1mqklz0_di" bpmnElement="Event_1mqklz0">        <omgdc:Bounds x="1002" y="197" width="36" height="36" />        <bpmndi:BPMNLabel>          <omgdc:Bounds x="1009" y="240" width="23" height="14" />        </bpmndi:BPMNLabel>      </bpmndi:BPMNShape>      <bpmndi:BPMNShape id="Activity_183ksl7_di" bpmnElement="Activity_15gykiz">        <omgdc:Bounds x="490" y="400" width="100" height="80" />      </bpmndi:BPMNShape>    </bpmndi:BPMNPlane>  </bpmndi:BPMNDiagram></definitions>`}),{pagination:u,handleCurrentChange:N,handleSizeChange:P}=I(X.page);K(()=>{for(let a=0;a<10;a++)v.value.push({id:"1628283509519011841",name:"流程名称",remark:"流程说明",status:0,status_name:"创建",execute_count:1,finish_count:1,created_name:"管理员",created_datetime:"2023-04-12 22:43:00"})});function k(a){switch(a){case 0:return"info";case 1:return"warning";case 2:return"success";case 3:return"danger";default:return""}}function q(a){return $.xml(a,50)}function A(){s.value.preview=!0}return(a,o)=>{const _=n("el-input"),b=n("el-form-item"),g=n("el-option"),S=n("el-select"),p=n("el-button"),z=n("el-button-group"),C=n("el-form"),y=n("el-row"),d=n("el-table-column"),V=n("el-tag"),R=n("el-table"),G=n("el-pagination"),x=n("el-tab-pane"),D=n("el-image"),L=n("el-tabs"),T=n("el-dialog");return w(),F("div",J,[e(y,{style:{height:"50px"}},{default:t(()=>[e(C,{inline:!0,model:c.value},{default:t(()=>[e(b,{label:"名称"},{default:t(()=>[e(_,{modelValue:c.value.key,"onUpdate:modelValue":o[0]||(o[0]=i=>c.value.key=i),placeholder:"请输入名称",clearable:!0},null,8,["modelValue"])]),_:1}),e(b,{label:"状态"},{default:t(()=>[e(S,{modelValue:c.value.value,"onUpdate:modelValue":o[1]||(o[1]=i=>c.value.value=i),placeholder:"请选择状态",clearable:!0},{default:t(()=>[e(g,{label:"创建",value:"创建"}),e(g,{label:"载入",value:"载入"}),e(g,{label:"启用",value:"启用"}),e(g,{label:"停止",value:"停止"})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(z,null,{default:t(()=>[e(p,{type:"primary"},{default:t(()=>[e(m,{name:"icon-search"}),l("  查询 ")]),_:1}),e(p,{type:"primary",onClick:o[2]||(o[2]=i=>a.$router.push({path:"/Flow/Created"}))},{default:t(()=>[e(m,{name:"icon-add"}),l("  新增流程 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(y,{style:{height:"calc(100% - 100px)"}},{default:t(()=>[e(R,{data:v.value,stripe:"",border:"",height:"100%",style:{width:"100%"}},{default:t(()=>[e(d,{label:"ID",prop:"id",align:"center",width:"200"}),e(d,{label:"名称",prop:"name",align:"center",width:"400","show-overflow-tooltip":!0}),e(d,{label:"说明",prop:"remark",align:"center","show-overflow-tooltip":!0}),e(d,{label:"状态",align:"center",width:"100"},{default:t(i=>[e(V,{size:"small",type:k(i.row.status)},{default:t(()=>[l(B(i.row.status_name),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"执行次数",prop:"execute_count",width:"100",align:"center","show-overflow-tooltip":!0}),e(d,{label:"完成次数",prop:"finish_count",width:"100",align:"center","show-overflow-tooltip":!0}),e(d,{label:"创建人员",prop:"created_name",width:"100",align:"center","show-overflow-tooltip":!0}),e(d,{label:"创建时间",prop:"created_datetime",width:"180",align:"center","show-overflow-tooltip":!0}),e(d,{label:"操作",width:"210",align:"center"},{default:t(i=>[e(p,{link:"",type:"primary",onClick:o[3]||(o[3]=te=>A())},{default:t(()=>[e(m,{name:"icon-eye",style:{color:"#409efc"}}),l("  查看 ")]),_:1}),e(p,{link:"",type:"primary"},{default:t(()=>[e(m,{name:"icon-edit",style:{color:"#409efc"}}),l("  编辑 ")]),_:1}),i.row.status/2<1?(w(),E(p,{key:0,link:"",type:"primary"},{default:t(()=>[e(m,{name:"icon-enable",style:{color:"#409efc"}}),l("  启用 ")]),_:1})):(w(),E(p,{key:1,link:"",type:"primary"},{default:t(()=>[e(m,{name:"icon-disable",style:{color:"#409efc"}}),l("  停用 ")]),_:1}))]),_:1})]),_:1},8,["data"])]),_:1}),e(y,{style:{float:"right",height:"50px"}},{default:t(()=>[e(G,{currentPage:r(u).page,"onUpdate:currentPage":o[4]||(o[4]=i=>r(u).page=i),"hide-on-single-page":"",background:"","page-sizes":r(u).page_sizes,layout:"sizes,prev, pager, next",total:r(u).total,onSizeChange:r(P),onCurrentChange:r(N)},null,8,["currentPage","page-sizes","total","onSizeChange","onCurrentChange"])]),_:1}),e(T,{modelValue:s.value.preview,"onUpdate:modelValue":o[7]||(o[7]=i=>s.value.preview=i),"destroy-on-close":!0,"append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"50%"},{header:t(()=>[f("span",null,[e(m,{name:"icon-code"}),l(" XML预览 ")])]),footer:t(()=>[f("span",Y,[e(p,{type:"primary",onClick:o[6]||(o[6]=i=>s.value.preview=!1)},{default:t(()=>[l("确定")]),_:1})])]),default:t(()=>[e(L,{modelValue:s.value.active,"onUpdate:modelValue":o[5]||(o[5]=i=>s.value.active=i)},{default:t(()=>[e(x,{label:"XML",name:"xml"},{default:t(()=>[O((w(),F("pre",Q,[l("                        "),f("code",W,B(q(s.value.xml)),1),l(`
                    `)])),[[M]])]),_:1}),e(x,{label:"流程图",name:"picture"},{default:t(()=>[e(D,{style:{width:"100%",height:"100%"},fit:"scale-down",src:s.value.picture},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Be=U(Z,[["__scopeId","data-v-db0b09ce"]]);export{Be as default};
